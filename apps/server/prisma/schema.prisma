generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model project {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  team_id       String    @db.Uuid
  owner_id      String    @db.Uuid
  title         String
  profile_image String?
  status        String?   @default("ACTIVE")
  description   String?
  is_use        Boolean   @default(true)
  created_at    DateTime  @default(now()) @db.Timestamptz(6)
  updated_at    DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at    DateTime? @db.Timestamptz(6)
  user          user      @relation(fields: [owner_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  team          team      @relation(fields: [team_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  task          task[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model task {
  id                          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  project_id                  String    @db.Uuid
  owner_id                    String    @db.Uuid
  assignee_id                 String    @db.Uuid
  title                       String
  content                     String
  status                      String?   @default("ACTIVE")
  priority                    Decimal?  @default(5) @db.Decimal
  duedate                     DateTime  @db.Timestamptz(6)
  description                 String?
  is_use                      Boolean   @default(true)
  created_at                  DateTime  @default(now()) @db.Timestamptz(6)
  updated_at                  DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at                  DateTime? @db.Timestamptz(6)
  user_task_assignee_idTouser user      @relation("task_assignee_idTouser", fields: [assignee_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  user_task_owner_idTouser    user      @relation("task_owner_idTouser", fields: [owner_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  project                     project   @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model team {
  id           String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name         String
  image_url    String?
  owner_id     String         @db.Uuid
  description  String?
  is_use       Boolean        @default(true)
  created_at   DateTime       @default(now()) @db.Timestamptz(6)
  updated_at   DateTime       @default(now()) @db.Timestamptz(6)
  deleted_at   DateTime?      @db.Timestamptz(6)
  project      project[]
  user         user           @relation(fields: [owner_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  team_members team_members[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model team_members {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  team_id     String    @db.Uuid
  user_id     String    @db.Uuid
  role        String?   @default("MEMBER")
  description String?
  is_use      Boolean   @default(true)
  created_at  DateTime  @default(now()) @db.Timestamptz(6)
  updated_at  DateTime  @default(now()) @db.Timestamptz(6)
  deleted_at  DateTime? @db.Timestamptz(6)
  team        team      @relation(fields: [team_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  user        user      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model user {
  id                          String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email                       String         @unique
  password                    String
  nickname                    String
  profile_image               String?
  description                 String?
  is_use                      Boolean        @default(true)
  created_at                  DateTime       @default(now()) @db.Timestamptz(6)
  updated_at                  DateTime       @default(now()) @db.Timestamptz(6)
  deleted_at                  DateTime?      @db.Timestamptz(6)
  project                     project[]
  task_task_assignee_idTouser task[]         @relation("task_assignee_idTouser")
  task_task_owner_idTouser    task[]         @relation("task_owner_idTouser")
  team                        team[]
  team_members                team_members[]
}
